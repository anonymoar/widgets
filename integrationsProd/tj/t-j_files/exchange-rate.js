(()=>{"use strict";var e={745:(e,t,r)=>{var o=r(250);t.s=o.createRoot,o.hydrateRoot},250:e=>{e.exports=LIBS["react-dom"]}},t={};function r(o){var a=t[o];if(void 0!==a)return a.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,r),n.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{const e=LIBS.react;var t=r.n(e),o=r(745);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},a.apply(this,arguments)}const n="data-tj-feature",c="exchange-rate",s="tj-feature-update-exchange-rate",i="TJ-EXCHANGE-RATE",u=t=>{const{placeholder:r,fromCurrency:o,fromValue:u}=t.config,l=[c,o].join("-"),f=(void 0===d&&(d=Date.now()),new Date(d).toISOString().split("T")[0]);var d;const p=[i,o,f].join("-"),m={[n]:l},v="["+n+'="'+l+'"]',h=(e=>localStorage.getItem(e))(p),[g,E]=e.useState(Number(h)),y=e.useRef(null),S=e=>{e&&(((e,t)=>{localStorage.setItem(e,t)})(p,String(e)),E(e),document.dispatchEvent(new CustomEvent(s+p,{detail:e})))},w=e=>E(e.detail);return e.useEffect((()=>{if(!h&&o)return document.querySelectorAll(v)[0]===y.current?((e=>{Object.keys(localStorage).forEach((t=>{t.startsWith(i)&&!t.endsWith(e)&&localStorage.removeItem(t)}))})(f),void(async e=>{const t=(await fetch("https://feature-services.tinkoffjournal.ru/stocks/api/public/v1/prices/alias/currentOrLastAvailablePrice?aliasNames=TJ"+e).then((e=>e.json()))).data["TJ"+e];if(!t)throw new Error("Нет такого тикера");return t.price})(o).then(S).catch(console.error)):(document.addEventListener(s+p,w),()=>document.removeEventListener(s+p,w))}),[]),e.createElement("span",a({},m,{ref:y}),g?(j=g*u).toLocaleString("ru-RU",{maximumFractionDigits:0,useGrouping:j>9999}):r);var j},l=e=>{const{fromCurrency:t,toCurrency:r,placeholder:o}=e._attrs;return{fromCurrency:t,toCurrency:r,fromValue:+e._attrs.fromValue.replace(",",".").replace(" ",""),placeholder:o}};window.TJ_FEATURES=window.TJ_FEATURES||{},window.TJ_FEATURES["exchange-rate"]={default:function(e){const r=t().createElement(u,{config:l(e.config)});(0,o.s)(e.rootEl).render(r)}}})()})();